(this["webpackJsonpreact-course"]=this["webpackJsonpreact-course"]||[]).push([[0],{115:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c.n(n),r=c(48),s=c.n(r),i=c(15),j=c(73),o=c(23),l=c(21),d=c(3),u=Object(n.createContext)(),b=function(){return Object(n.useContext)(u)},O=function(e){var t=e.children,c=Object(n.useState)([]),a=Object(i.a)(c,2),r=a[0],s=a[1],j=Object(l.e)(),b={addProduct:function(e,t){b.isInCart(e)?s((function(){var c=r,n=c.findIndex((function(t){return t.product.id===e.id}));return c[n].amount=c[n].amount+t,c})):s((function(){return[].concat(Object(o.a)(r),[{product:e,amount:t}])}))},setAmount:function(e,t){var c=Object(o.a)(r),n=c.findIndex((function(t){return t.product.id===e.id}));c[n].amount=t,b.isInCart(e)&&s(c)},removeProduct:function(e){b.isInCart(e)&&s((function(){var t=Object(o.a)(r),c=t.findIndex((function(t){return t.product.id===e.id}));return t.splice(c,1),t}))},clear:function(){s([])},isInCart:function(e){return!!r.find((function(t){return t.product.id===e.id}))},totalItems:function(){var e=0;return r.forEach((function(t){return e+=t.amount})),e},totalMoney:function(){var e=0;return r.forEach((function(t){return e+=t.amount*t.product.price})),e},endCart:function(){j.push("/end"),b.clear()}};return Object(d.jsx)(u.Provider,{value:{cart:r,cartTask:b},children:t})},x=c(132),h=c(28),m=function(){var e=b(),t=e.cart,c=e.cartTask,a=Object(n.useState)(),r=Object(i.a)(a,2),s=r[0],o=r[1];return Object(n.useEffect)((function(){o(c.totalItems())}),[t]),Object(d.jsxs)(x.a.Link,{as:h.b,to:"/cart",children:[Object(d.jsx)(j.a,{style:{fontSize:"30px"}}),0===s?null:s]})},f=c(129),p=c(122),g=c(128),y=function(){return Object(d.jsx)(f.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:Object(d.jsxs)(p.a,{children:[Object(d.jsx)(f.a.Brand,{as:h.b,to:"/",children:"E-Shop"}),Object(d.jsx)(f.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(d.jsx)(f.a.Collapse,{id:"responsive-navbar-nav",className:"justify-content-end",children:Object(d.jsxs)(x.a,{children:[Object(d.jsx)(x.a.Link,{as:h.b,to:"/category/electronics",children:"Electronics"}),Object(d.jsx)(x.a.Link,{as:h.b,to:"/category/jewelery",children:"Jewelery"}),Object(d.jsxs)(g.a,{title:"Ropa",id:"collasible-nav-dropdown",children:[Object(d.jsx)(g.a.Item,{as:h.b,to:"/category/men's clothing",children:"Men's clothing"}),Object(d.jsx)(g.a.Item,{as:h.b,to:"/category/women's clothing",children:"Women's clothing"})]}),Object(d.jsx)(m,{})]})})]})})},v=c(9),k=c(84),N=(c(111),c(116),k.a.initializeApp({apiKey:"AIzaSyClFW0w9EKGWfwhEb0LcSceS6xLg4s-psg",authDomain:"react-app-coder.firebaseapp.com",projectId:"react-app-coder",storageBucket:"react-app-coder.appspot.com",messagingSenderId:"1079241243756",appId:"1:1079241243756:web:d29974d3cb14b67c78ec49"}).firestore()),S=N.collection("products"),C=N.collection("orders"),I=Object(n.createContext)(),T=function(){return Object(n.useContext)(I)},w=function(e){var t=e.children,c=Object(n.useState)(null),a=Object(i.a)(c,2),r=a[0],s=a[1],j=Object(n.useState)("Error"),o=Object(i.a)(j,2),l=o[0],u=o[1],b={};return b.orderState=r,b.setOrderState=s,b.orderMessage=l,b.setOrderMessage=u,b.getProducts=function(e,t){var c,n=[];return e&&(c=S.where("price","<",e)),t&&(c=c?c.where("category","==",t):S.where("category","==",t)),c||(c=S),c.get().then((function(e){return e.forEach((function(e){n.push(Object(v.a)({id:e.id},e.data()))})),n}))},b.getProduct=function(e){return S.doc(e).get().then((function(e){return Object(v.a)({id:e.id},e.data())}))},b.putOrder=function(e,t,c){C.add({buyer:e,items:t,date:k.a.firestore.Timestamp.now(),total:c}).then((function(e){u("Felicitaciones por tu compra! \n Tu numero de orden es:"+e.id),s(!0)})).catch((function(e){u("Hubo un error con tu compra intentalo de nuevo mas tarde"),s(!1),console.error(e)}))},Object(d.jsx)(I.Provider,{value:{fireTask:b},children:t})},E=c(123),P=c(92),z=c(131),M=c(91),A=function(e){var t=e.item;return Object(d.jsx)(P.a,{style:{minHeight:600},children:Object(d.jsxs)(z.a,{children:[Object(d.jsx)(z.a.Img,{src:t.image,style:{height:300,overflow:"hidden",objectFit:"contain"}}),Object(d.jsxs)(z.a.Body,{children:[Object(d.jsx)(z.a.Title,{children:t.title}),Object(d.jsx)(z.a.Text,{children:t.description.length>200?t.description.substring(0,200)+"...":t.description}),Object(d.jsx)(M.a,{as:h.b,to:"/item/"+t.id,variant:"primary",children:"See More"})]})]})})},B=c(93),F=function(e){var t=e.list;return Object(d.jsx)(E.a,{xs:1,md:3,className:"g-4",style:{width:"100%",margin:"0"},children:Object.keys(t).length>0?t.map((function(e){return Object(d.jsx)(A,{item:e},e.id)})):Object(d.jsxs)(p.a,{className:"d-flex flex-column justify-content-center text-center",style:{minHeight:"80vh"},children:[Object(d.jsx)(E.a,{className:"justify-content-around",children:Object(d.jsx)(B.a,{style:{fontSize:"200px",marginBottom:"20px"}})}),Object(d.jsx)(E.a,{children:Object(d.jsx)("h1",{children:"No items here!"})})]})})},L=c(124),$=function(){return Object(d.jsx)(p.a,{className:"d-flex align-items-center justify-content-center vh-100",children:Object(d.jsx)(L.a,{animation:"border",role:"status",style:{zoom:"2"},children:Object(d.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})},H=c(130),J=c(125),G=c(94),W=c(95),D=function(e){var t=e.setMaxPrice,c=e.maxPrice,n=e.active,a=e.setActive,r=e.handleClick;return Object(d.jsxs)(p.a,{className:"d-flex justify-content-end align-items-center",style:{height:60},children:[Object(d.jsx)(H.a.Check,{type:"checkbox",label:"Activar filtros",onChange:function(e){a(e.target.checked)},checked:n}),Object(d.jsxs)(J.a,{className:"mx-3",style:{width:200},children:[Object(d.jsx)(J.a.Text,{id:"inputGroup-sizing-default",children:"Max Price"}),Object(d.jsx)(G.a,{"aria-label":"Default","aria-describedby":"inputGroup-sizing-default",type:"number",value:c,onChange:function(e){e.target.value<0?t(0):Number.isInteger(parseInt(e.target.value))?t(parseInt(e.target.value)):t(c)}})]}),Object(d.jsx)(W.a,{className:"mx-3",style:{fontSize:30,cursor:"pointer"},onClick:r})]})},K=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!0),s=Object(i.a)(r,2),j=s[0],o=s[1],u=T().fireTask,b=Object(l.f)().category,O=Object(n.useState)(!1),x=Object(i.a)(O,2),h=x[0],m=x[1],f=Object(n.useState)(100),p=Object(i.a)(f,2),g=p[0],y=p[1],v=Object(n.useState)(!1),k=Object(i.a)(v,2),N=k[0],S=k[1];return Object(n.useEffect)((function(){o(!0),h?u.getProducts(g,b).then((function(e){return a(e)})):u.getProducts(null,b).then((function(e){return a(e)}))}),[b,h,N]),Object(n.useEffect)((function(){c&&o(!1)}),[c]),j?Object(d.jsx)($,{}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(D,{setMaxPrice:y,maxPrice:g,active:h,setActive:m,handleClick:function(){return S(!N)}}),Object(d.jsx)(F,{list:c})]})},R=c(127),X=c(126),Y=function(e){var t=e.stock,c=e.initial,a=e.count,r=e.setCount,s=e.cartTask,j=e.product,o=Object(n.useState)(c),l=Object(i.a)(o,2),u=l[0],b=l[1];Object(n.useEffect)((function(){r(u<=1?1:u>=t?t:u)}),[u,r,t]);var O=function(e){var t=e.valor;return Object(d.jsx)("p",{className:"m-0 d-flex align-items-center",children:t})};return Object(d.jsxs)(X.a,{size:"sm",children:[Object(d.jsx)(M.a,{onClick:function(){return b(a-1)},className:"mx-3",children:"-"}),Object(d.jsx)(O,{valor:a}),Object(d.jsx)(M.a,{onClick:function(){return b(a+1)},className:"mx-3",children:"+"}),Object(d.jsx)(M.a,{onClick:function(){return s.addProduct(j,a)},children:"A\xf1adir al carrito"})]})},q=function(e){var t=e.stock,c=e.amount,a=e.cartTask,r=e.product,s=Object(n.useState)(c),j=Object(i.a)(s,2),o=j[0],l=j[1];return Object(n.useEffect)((function(){l(o<=1?1:o>=t?t:o),a.setAmount(r,o)}),[o,t,r]),Object(d.jsxs)(X.a,{size:"sm",className:"align-items-center",children:[Object(d.jsx)(M.a,{onClick:function(){return l(o-1<=1?1:o-1>=t?t:o-1)},className:"mx-3",children:"-"}),Object(d.jsx)("p",{className:"m-0",children:o}),Object(d.jsx)(M.a,{onClick:function(){return l(o+1<=1?1:o+1>=t?t:o+1)},className:"mx-3",children:"+"})]})},Q=function(e){var t=e.product,c=Object(n.useState)(),a=Object(i.a)(c,2),r=a[0],s=a[1],j=b().cartTask;return Object(d.jsx)(p.a,{className:"mb-5 p-5",children:Object(d.jsxs)(E.a,{children:[Object(d.jsx)(P.a,{md:6,children:Object(d.jsxs)(E.a,{children:[Object(d.jsx)(P.a,{md:12,children:Object(d.jsx)(R.a,{src:t.image,fluid:!0})}),Object(d.jsx)(P.a,{md:12,children:Object(d.jsxs)(E.a,{className:"w-100 h-100",children:[Object(d.jsx)(P.a,{children:Object(d.jsx)(R.a,{src:t.image,fluid:!0})}),Object(d.jsx)(P.a,{children:Object(d.jsx)(R.a,{src:t.image,fluid:!0})}),Object(d.jsx)(P.a,{children:Object(d.jsx)(R.a,{src:t.image,fluid:!0})})]})})]})}),Object(d.jsxs)(P.a,{md:6,className:"p-5",children:[Object(d.jsx)("h4",{children:t.title}),Object(d.jsx)("p",{children:t.category}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)("h4",{children:Object(d.jsxs)("b",{children:["$",t.price]})}),Object(d.jsx)("br",{}),Object(d.jsx)("h5",{className:"mb-5",children:t.description}),Object(d.jsx)("hr",{className:"mb-5"}),j.isInCart(t)?Object(d.jsx)(M.a,{as:h.b,to:"/cart",variant:"outline-primary",children:"Terminar mi compra"}):Object(d.jsx)(Y,{stock:t.stock,initial:1,count:r,setCount:s,cartTask:j,product:t})]})]})})},U=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!0),s=Object(i.a)(r,2),j=s[0],o=s[1],u=Object(l.f)().itemId,b=T().fireTask;return Object(n.useEffect)((function(){j&&b.getProduct(u).then((function(e){return a(e)}))}),[u,j]),Object(n.useEffect)((function(){c&&o(!1)}),[c]),j?Object(d.jsx)($,{}):Object(d.jsx)(Q,{product:c})},V=c(133),Z=function(e){var t=e.prod,c=b().cartTask;return Object(d.jsx)(V.a.Item,{children:Object(d.jsxs)(E.a,{className:"align-items-center",children:[Object(d.jsx)(P.a,{md:2,style:{height:"150px"},children:Object(d.jsx)(R.a,{src:t.product.image,className:"h-100",fluid:!0})}),Object(d.jsx)(P.a,{md:5,children:t.product.title}),Object(d.jsxs)(P.a,{style:{textAlign:"center"},children:["$",t.product.price]}),Object(d.jsxs)(P.a,{style:{textAlign:"center",display:"flex"},children:[Object(d.jsx)(q,{stock:5,amount:t.amount,cartTask:c,product:t.product}),Object(d.jsx)(M.a,{variant:"danger",onClick:function(){return c.removeProduct(t.product)},children:"X"})]})]})},t.product.id)},_=function(e){return Math.round(100*e)/100},ee=function(){var e=b(),t=e.cart,c=e.cartTask,a=T().fireTask,r=Object(n.useState)(c.totalItems()),s=Object(i.a)(r,2),j=s[0],l=s[1],u=Object(n.useState)(_(c.totalMoney())),O=Object(i.a)(u,2),x=O[0],h=O[1],m=Object(n.useState)(_(.01*x)),f=Object(i.a)(m,2),p=f[0],g=f[1],y=Object(n.useState)(_(x+20+p)),v=Object(i.a)(y,2),k=v[0],N=v[1];Object(n.useEffect)((function(){l(c.totalItems()),h(_(c.totalMoney()))}),[t]),Object(n.useEffect)((function(){g(_(.01*x)),N(_(x+20+p))}),[x]),Object(n.useEffect)((function(){null!==a.orderState&&c.endCart()}),[a.orderState]);var S={buyer:{name:"Juan Perez",email:"juan@perez.com",phone:"123456789",address:"Calle 123 #123-123"},items:Object(o.a)(t),total:k};return Object(d.jsxs)(z.a,{children:[Object(d.jsx)(z.a.Body,{children:Object(d.jsx)(z.a.Title,{children:Object(d.jsx)("b",{children:"Order Summary"})})}),Object(d.jsxs)(V.a,{className:"list-group-flush",children:[Object(d.jsxs)(V.a.Item,{className:"d-flex justify-content-between",children:[Object(d.jsxs)("span",{children:["Items(",j,"):"]}),Object(d.jsxs)("span",{children:["$",x]})]}),Object(d.jsxs)(V.a.Item,{className:"d-flex justify-content-between",children:[Object(d.jsx)("span",{children:"Shipping:"}),Object(d.jsx)("span",{children:"$20"})]}),Object(d.jsxs)(V.a.Item,{className:"d-flex justify-content-between",children:[Object(d.jsx)("span",{children:"Taxes:"}),Object(d.jsxs)("span",{children:["$",p]})]})]}),Object(d.jsx)(z.a.Body,{children:Object(d.jsxs)(z.a.Title,{className:"d-flex justify-content-between",style:{color:"red"},children:[Object(d.jsx)("span",{children:Object(d.jsx)("b",{children:"Order Total:"})}),Object(d.jsx)("span",{children:Object(d.jsxs)("b",{children:["$",k]})})]})}),Object(d.jsx)(z.a.Footer,{className:"d-flex justify-content-center",children:Object(d.jsx)(M.a,{variant:"primary",className:"w-100",size:"lg",onClick:function(){a.putOrder(S.buyer,S.items,S.total)},children:"Place your order"})})]})},te=function(){var e=b(),t=e.cart,c=e.cartTask;return 0===t.length?Object(d.jsxs)(p.a,{className:"d-flex flex-column justify-content-center",style:{minHeight:"90vh",textAlign:"center"},children:[Object(d.jsx)(E.a,{className:"justify-content-around",children:Object(d.jsx)(j.a,{style:{fontSize:"200px"}})}),Object(d.jsx)(E.a,{children:Object(d.jsx)("h1",{children:"Your cart is currently empty!"})}),Object(d.jsx)(E.a,{className:"justify-content-around",children:Object(d.jsx)(M.a,{variant:"primary",style:{width:"200px",marginTop:"30px"},as:h.b,to:"/",children:"Back to shopping"})})]}):Object(d.jsx)(p.a,{className:"mt-5",children:Object(d.jsxs)(E.a,{className:"justify-content-around",children:[Object(d.jsx)(P.a,{md:8,children:Object(d.jsxs)(V.a,{variant:"flush",children:[Object(d.jsx)(V.a.Item,{children:Object(d.jsxs)(E.a,{className:"align-items-center",children:[Object(d.jsx)(P.a,{children:Object(d.jsx)(z.a.Title,{children:Object(d.jsx)("b",{children:"Cart"})})}),Object(d.jsx)(P.a,{className:"d-flex justify-content-sm-end",children:Object(d.jsx)(M.a,{variant:"danger",onClick:function(){return c.clear()},children:"Clear Cart"})})]})}),t.map((function(e){return Object(d.jsx)(Z,{prod:e})})),Object(d.jsx)(V.a.Item,{})]})}),Object(d.jsx)(P.a,{children:Object(d.jsx)(ee,{})})]})})},ce=c(97),ne=c(96),ae=function(){var e=T().fireTask;return Object(d.jsxs)(p.a,{className:"d-flex flex-column justify-content-center",style:{minHeight:"90vh",textAlign:"center"},children:[Object(d.jsx)(E.a,{className:"justify-content-around",children:!0===e.orderState?Object(d.jsx)(ne.a,{style:{fontSize:"200px",marginBottom:"20px"}}):Object(d.jsx)(ce.a,{style:{fontSize:"200px"}})}),Object(d.jsx)(E.a,{children:Object(d.jsx)("pre",{children:Object(d.jsx)("h1",{children:e.orderMessage})})}),Object(d.jsx)(E.a,{className:"justify-content-around",children:Object(d.jsx)(M.a,{variant:"primary",style:{width:"200px",marginTop:"30px"},as:h.b,to:"/",onClick:function(){e.setOrderState(null),e.setOrderMessage("")},children:"Back to shopping"})})]})},re=(c(114),function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(h.a,{basename:"/",children:Object(d.jsx)(w,{children:Object(d.jsxs)(O,{children:[Object(d.jsx)(y,{}),Object(d.jsx)(l.a,{exact:!0,path:"/",component:K}),Object(d.jsx)(l.a,{exact:!0,path:"/category/:category",component:K}),Object(d.jsx)(l.a,{exact:!0,path:"/item/:itemId",component:U}),Object(d.jsx)(l.a,{exact:!0,path:"/cart",component:te}),Object(d.jsx)(l.a,{exact:!0,path:"/end",component:ae})]})})})})});s.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(re,{})}),document.getElementById("root"))}},[[115,1,2]]]);
//# sourceMappingURL=main.3d393265.chunk.js.map